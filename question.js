var questionList = ['I’ve never seen my ____ but I know it’s in my body','If you’re at a wedding, you’re going to hear ___','On a college campus, people often meet up at the ____','We went to the ____ during off hours so we could be the only ones there','Uh oh! “GODZILLA” showed up in Europe! Last I heard the city of ____ was his new stomping ground','There’s a lot of strategy involved in a game of ____','You always see ____ when you walk by a construction site','My spouse & I are going to Paris! To fit in we should learn how to say ____ in French','It would be so cool to see a ____ while SCUBA diving','What flag has red on it?','It could hurt if you sat on a ____','Now that they’ve watched “Peter Pan," my kids won’t stop talking about ____','When I was a kid my favorite after school snack was ____','A word of advice: never forget the importance of ____ when making a first impression','You know you’re talking to a real cowboy if you hear ____','There are often more kids than adults at a ____','You can work as a ____ on a cruise ship','Oh no! The photographer snapped the picture at the exact moment I ____','Uh oh! I went through the drive-thru and they forgot to give me ____','The Greek carpenters were in a rush, so now the Trojan horse looks more like a Trojan ____','A common word that comes after “book” is ____','When I think of a famous body of water, the first thing that comes to mind is ____','If you forget your ____ while traveling, you can usually buy a new one at the airport','A groovy ’70s-themed home wouldn’t be complete without ____','A pet ____ is usually kept in a glass enclosure','My dog’s favorite thing to do is ____','What’s a sport usually done indoors?','Besides numbers, you’ll see a ____ button on a calculator','If meditation isn’t your thing, you can always do ____ to relax instead','What’s a large breed of dog?','The one website my friend visits everyday is ____','Groundskeepers are essential when it comes to the sport of ____','In science class, we did a fun series of experiments called “Will it ____?"','Even someone who doesn’t cook has a ____ in their kitchen','Sure, planes are cool, but I’d like to go through the air in a ____','When I hear the word cozy, I think of ____','My sibling’s a huge Harry Potter fan--they love ____','If you want a real workout, try playing ____ w/ a toddler','Oh no! I just got a ____ stain on my new shirt','My favorite southern city to visit is ____','What is a type of doctor?','Besides a human, what’s an animal that can walk on two legs?','At work, you really don’t want to spill coffee on your ____','What’s a word that comes after “light”?','Whenever I order a drink at STARBUCKS, I add ____','No matter the restaurant, you can always count on ____ being on the breakfast menu','My grandmother recently gave me the secret recipe for her ____','If you’re putting a home gym in your garage, you might want a ____','The internet is filled with cute videos of baby animals, like ____','What’s the most exotic fruit?','There’s really no need to use a dressing room to try on ____','Want to make someone happy? Give them a ____','My cat always seems to knock the ____ off the coffee table','Kale me a health nut, but you can’t have a salad without ____','At the aquarium gift shop, I got my friend a stuffed ____','A word that often comes after “gold” is ____','We’re opening a fairy princess boutique, and are having a 2-for-1 sale on ____','Don’t tell mom that I broke my ____','Different regions of the U.S. have different ____','Other than ships, pirates are known for ____','Little known fact--The Three Little Pigs had a cousin who built his house out of ____','A word that often follows “moon” is ____','Some people put ____ in their vehicle for decoration','If you’re going to make ____ to eat you’ll need some dough','What’s something you’ll find on a driver’s license?','Besides poker, you can play ____ with a standard deck of cards','According to this Chinese astrology chart, I was born in the year of the ____','I haven’t turned it on in so long. I hope my ____ still works','When going camping, you don’t want to forget your ____'];
var answerList =
['Heart, Lungs, Liver, Brain, Kidney, Small Intestine, Spleen','Bells, Vows, Crying, Wedding March, Congratulations, Clinking Glasses, Speeches','Library, Cafeteria, Quad, Dorm, Gym, Student Unions, Stadium','Zoo, Bar, Mall, Amusement Park, Museum, Movie Theater, Restaurant','Paris, Amsterdam, London, Rome, Prague, Berlin, Venice','Chess, Monopoly, Scrabble, Go, Battleship, Cataan, Risk','Workers, Crane, Hard Hats, Scaffolding, Bricks, Cones, Dirt','Hello, Yes, Bathroom, Thank You, Please, How Much, Help','Dolphin, Shark, Jellyfish, Whale, Octopus, Manatee, Shipwreck','American, Canadian, Italian, Chinese, Japanese, Swiss, Polish','Tack, Cactus, Fence,  Needle, Bed Of Nails, Porcupine, LEGO','Wendy, Captain Hook, Tinkerbell, Neverland, Flying, Crocodiles, Pixie Dust','Oreos, Chips, Apples, Peanut Butter And Jelly, Graham Crackers, Pretzels, Cheese','Handshake, Smiling, Being On Time, Eye Contact, Hygiene, Appearance, Manners','Yall, Partner, Giddyup, Yeehaw, Reckon, Howdy, Lasso','Zoo, Amusement Park, School, Playground, Pool','Waiter, Singer, Bartender, Host, Captain, Cook, Steward','Blinked, Sneezed, Coughed, Yawned, Frowned, Burped, Slipped','Fries, Ketchup, Napkins, Sauce, Straw, Receipt, Change','Pony, Goat, Donkey, Pig, Cow, Dog, Camel','End, Keeper, Worm, Smart, Report, Shelf, Mark','Atlantic Ocean, Pacific Ocean, Gulf of Mexico, Dead Sea, Mississippi River, Mediterranean Sea, Lake Erie','Phone Charger, Headphones, Pillow, Toothbrush, Umbrella, Water Bottle, Book','Disco Ball, Shag Carpet, Lava Lamp, Beanbag Chair, Record Player, Bead Curtain, Peace Sign','Snake, Lizard, Frog, Fish, Spider, Hamster, Turtle','Fetch, Sleep, Lick, Bark, Eat, Play, Dig','Basketball, Hockey, Table Tennis, Gymnastics, Wrestling, Bowling','Plus, Minus, Equals, Decimal, Percentage, Function, Clear','Read, Write, Knit, Yoga, Listen To Music, Watch TV, Drive','German Shepherd, St Bernard, Husky, Great Dane, Greyhound, Mastiff, Bulldog','Twitter, Google, Facebook, Reddit, Ebay, YouTube, Amazon','Football, Golf, Baseball, Cricket, Lacrosse, Soccer, Polo','Explode, Melt, Float, Bounce, Burn, Expand, Work','Microwave, Stove, Refrigerator, Toaster, Knife, Spatula, Can Opener','Helicopter, Hot Air Balloon, Rocket, Hang Glider, Blimp, Flying Car, Magic Carpet','Blankets, Fireplace, Couch, Nook, Snuggling, Cottage, Flannel','Magic, Hogwarts, Quidditch, Dumbledore, Hermione, Snape, Dobby','Tag, Peekaboo, Soccer, Hide And Seek, Catch, Horsey','Coffee, Ketchup, Mustard, Wine, Tomato Sauce, Grease, Ink','Nashville, New Orleans, Savannah, Charleston, Atlanta, Orlando, Memphis','Dentist, Neurologist, Pediatrician, Cardiologist, Gynecologist, Dermatologist, Podiatrist','Kangaroo, Ostrich, Bear, Monkey, Flamingo, Chicken, Penguin','Computer, Pants, Desk, Paperwork, Tie, Shirt, Boss','Bulb, House, Saber, Switch, Hearted, Weight','Whipped Cream, Vanilla, Ice, Espresso, Caramel, Sugar, Cinnamon','Hash Browns, Pancakes, Eggs, Bacon, Orange Juice, Coffee, Toast','Apple Pie, Cookies, Bread, Meatloaf, Pasta Sauce, Biscuits, Chili','Treadmill, Bench, Elliptical, Punching Bag, Mirror, Fan, Padded Floor','Kittens, Elephants, Puppies, Goats, Monkeys, Penguins','Dragon Fruit, Pineapple, Mango, Kiwi, Papaya, Guava, Durian','Shoes, Hats, Coats, Gloves, Glasses, Belts, Sweaters','Hug, Gift Card, Flower, Car, Compliment, Present, Smile','Vase, Magazines, Plants, Remote, Candle, Book, Coasters','Croutons, Lettuce, Tomato, Avocado, Dressing, Spinach, Carrots','Fish, Dolphin, Penguin, Octopus, Whale, Crab, Shark','Plated, Mine, Rush, Medal, Digger, Star','Wands, Tiaras, Dresses, Shoes, Tutus, Flowers, Wings','Watch, Glasses, Curfew, Phone, Lamp, Arm','Accents, Food, Weather, Time Zones, Area Codes, Traditions, Slang','Treasure, Parrots, Eye Patches, Peg Legs, Hooks, Swords, Rum','Clay, Mud, Stone, Cement, Steel, Aluminum, Glass','Tide, Landing, Struck, Shine, River, Light, Beam','Air Fresheners, Stuffed Animals, Dice, Beads, Hula Girls, Bobbleheads, Seat Covers','Bread, Cookies, Donuts, Pie Biscuits, Pizza, Bagels','Date Of Birth, Name, Weight, Eye Color, State, Expiration Date, Picture','Blackjack, Spades, Rummy, War, Solitaire, Hearts, Bridge','Tiger, Rat, Snake, Rabbit, Monkey, Dragon, Dog','Radio, Air Conditioner, Car, Lawnmower, Flashlight, Laptop, Charm','Tent, Flashlight, Toilet Paper, Sleeping Bag, Matches, Bug Spray, Pillow'];
var indivAnswers = [];
var indivAnswerSg = [];

var random;
var keyPressed;
var inputElement;
var input;
var letter;
var letter2;
var lineLength;
var lineLength2;
var emptyAnswer;
var answerNumber = 0;
var lowerCase;
var upperCase;
var upperThenLowercase;
var teamA;
var teamB;
var rounds = 0; // rounds counter starts at 0, adds value at the /beginning/ of each round
var teamAPoints = 0;
var teamBPoints = 0;
var teamAPointsElement = document.getElementById("teamAPoints");
var teamBPointsElement = document.getElementById("teamBPoints");
var whosTurn;
var wordsAnswered = 0;
var stepCounter = 0;
var quoteList = ["A person without regrets is a nincompoop", "Try to be a rainbow in someone else’s cloud", "A problem is a chance for you to do your best", "The most important trip you may take in life is meeting people halfway", "Happiness makes up in height for what it lacks in length", "Success is falling nine times and getting up ten", "Don’t say you can’t until you prove you can’t", "I still close my eyes and go home—I can always draw from that", "No day in which you learn something is a complete loss", "Be open to learning new lessons, even if they contradict the lessons you learned yesterday", "The sky isn’t the limit—the sky has no limit", "Speak your mind, even if your voice shakes", "All glory comes from daring to begin", "If you don’t place your foot on the rope, you’ll never cross the chasm", "Joy is one of the only emotions you can’t contrive", "I don’t want to get to the end of my life and find that I have just lived the length of it. I want to have lived the width of it as well", "The best thing about the future is that it comes only one day at a time"];
var quoteAuthorList = ["Mia Farrow", "Maya Angelou", "Duke Ellington", "Henry Boye", "Robert Frost", "Jon Bon Jovi", "Les Paul", "Dolly Parton", "David Eddings", "Ellen DeGeneres", "Sarah Barker", "Maggie Kuhn", "Eugene F. Ware", "Liz Smith", "Bono", "Diane Ackerman", "Dean Acheson"];
var randomQuote;


// ---timer variables---
var sec;
var timer;
var timerElement = document.getElementById("timer");
var timerGameElement = document.getElementById("timer-screen");
var timerGameElement2 = document.getElementById("timer-screen2");

function start () {
  teamA = document.getElementById("teamABox").value;
  teamB = document.getElementById("teamBBox").value;
  document.getElementById("teamAPointName").innerText = teamA + ": ";
  document.getElementById("teamBPointName").innerText = teamB + ": ";
  timerFunction5Start();
}

function nextQuestion() {
  for (let k = 0; k < indivAnswers.length; k++) {
    var answerID = document.getElementById("answer" + k);
    answerID.style.color = "rgba(255, 170, 170, 255)";
    }
  wordsAnswered = 0;
  answerNumber = 0; // resets the value added to the end of an answer's ID
  document.getElementById("answers").innerHTML = ""; // deletes all the old answers
  random = Math.floor(Math.random() * questionList.length);
  if (questionList[random] == null) { // checks if it's run out of questions
    alert("out of questions :(");
  } else {
    document.getElementById("question").innerText = questionList[random]; // changes the question
    indivAnswers = answerList[random].split(", "); // seperates the list of possible answers
    for (let i = 0; i < indivAnswers.length; i++) { // makes an empty answer
      // vvv split answer and get the first character of each letter, then add _______
      indivAnswerSg = indivAnswers[i].split(" ");
      if (indivAnswerSg.length == 2) { // checks if the answer is two words long
          letter = indivAnswerSg[0].charAt(0);
          letter2 = indivAnswerSg[1].charAt(0);

          lineLength = indivAnswerSg[0].length;
          lineLength2 = indivAnswerSg[1].length;

          var emptyAnswer = letter;
          for (let i = 0; i < lineLength; i++) {
          emptyAnswer = emptyAnswer + "_"
          }

          var emptyAnswer = emptyAnswer + letter2;
          for (let i = 0; i < lineLength2; i++) {
          emptyAnswer = emptyAnswer + "_"
          }

          var newSpan = document.createElement("span");
          newSpan.innerText = emptyAnswer;
          newSpan.id = "answer" + answerNumber;
          document.getElementById("answers").appendChild(newSpan);

      } else {
        letter = indivAnswerSg[0].charAt(0);
        lineLength = indivAnswerSg[0].length;
        emptyAnswer = letter;
          for (let i = 0; i < lineLength; i++) {
          emptyAnswer = emptyAnswer + "_";
          }
          var newSpan = document.createElement("Span");
          newSpan.innerText = emptyAnswer;
          newSpan.id = "answer" + answerNumber;
          document.getElementById("answers").appendChild(newSpan);
      }
      answerNumber = answerNumber + 1;
    }
  }

  var usedQuestions = questionList.splice(random, 1);
  var usedAnswers = answerList.splice(random, 1);
}

function endScreen() {
  clearInterval(timer);

  document.getElementById("endScreen").style.opacity = 1;
  document.getElementById("endScreen").classList.remove("hidden");
  var innerTextPointsA = "Team " + teamA + ": " + teamAPoints;
  var innerTextPointsB = "Team " + teamB + ": " + teamBPoints;

  document.getElementById("teamAPointsSummary").innerText = innerTextPointsA;
  document.getElementById("teamBPointsSummary").innerText = innerTextPointsB;
  var innerTextCongrats;
  if (teamAPoints > teamBPoints) {
    innerTextCongrats = "Congratulations Team " + teamA + "!!";
  } else if (teamBPoints > teamAPoints) {
    innerTextCongrats = "Congratulations Team " + teamB + "!!";
  } else {
    innerTextCongrats = "Tie!! Congratulations to both teams!"
  }
  document.getElementById("congratulations").innerText = innerTextCongrats;
}

function makeLowercase(answer) {
lowerCase = answer.toLowerCase();
return lowerCase;
}

function makeUppercase(answer) {
upperCase = answer.toUpperCase();
return upperCase;
}

function makeEverythingButFirstLetterLowercase(answer) { // ex. answer = Treasure Chest, length = 14
letter = answer.charAt(0); // ex. letter = T
var everythingButFirstLetter = answer.substring(1, answer.length); // ex. everythingButFirstLetter = reasure Chest
var everythingButFirstLetterMadeLowercase = everythingButFirstLetter.toLowerCase(); // ex. everythingButFirstLetterMadeLowercase = reasure chest
var everythingButTheFirstLetterIsLowercase = letter + everythingButFirstLetterMadeLowercase; // ex. everythingButTheFirstLetterIsLowercase = Treasure chest
return everythingButTheFirstLetterIsLowercase;
}


//----------timer functions---------------

function timerFunction5Start () {
  // team one starts, pause screen pops up before dissapearing again after 5 seconds, with timer function
  rounds++;
  if (rounds == 1) {
    sec = 4;
  } else {
    sec = 5;
  }

  if (rounds > 1) {
    showStartWaitingScreen();
  }

  if ((rounds % 2) == 1) { // checks if it is TeamA or TeamB's turn
    document.getElementById("startWaitingScreenText").innerText = "Team " + teamA + " starting in:";
    whosTurn = "itsTeamA'sTurn";
  } else if ((rounds % 2) == 0) {
    document.getElementById("startWaitingScreenText").innerText = "Team " + teamB + " starting in:";
    whosTurn = "itsTeamB'sTurn";
  }

  document.getElementById("roundCounter").innerText = "Round " + rounds;

  randomQuote = Math.floor(Math.random() * quoteList.length);
  document.getElementById("quote").innerText = "“" + quoteList[randomQuote] + ".”";
  document.getElementById("author").innerText = "—— " + quoteAuthorList[randomQuote] + ", an American";
  quoteList.splice(randomQuote, 1);
  quoteAuthorList.splice(randomQuote, 1);

  timer = setInterval(() =>
  { timerElement.innerText = "00:30";
    if (sec < 10) {
      if (sec < 0) {
        clearInterval(timer);
        timerFunction30TeamOne();
        } else {
          timerGameElement.innerText = "00:0" + sec;
        }
    } else {
        timerGameElement.innerText = "00:" + sec;
        }
    sec --;
  }, 1000);
}

function timerFunction30TeamOne () {
  stepCounter = 2;
  nextQuestion();
  sec = 30;
  removeStartWaitingScreen();
  timer = setInterval(() =>
  {timerGameElement.innerText = "00:05";
     if (sec < 10) {
      if (sec < 0) {
        clearInterval(timer);
          timerFunction5Break();
        } else {
          timerElement.innerText = "00:0" + sec;
        }
    } else {
        timerElement.innerText = "00:" + sec;
        }
    sec --;
  }, 1000);
}

function timerFunction5Break () {
  stepCounter = 3;
  sec = 5;

  if ((rounds % 2) == 1) { // checks if it is TeamA or TeamB's turn
    document.getElementById("pauseScreenText").innerText = "Team " + teamB + " starting in:";
    whosTurn = "itsTeamB'sTurn";
  } else if ((rounds % 2) == 0) {
    document.getElementById("pauseScreenText").innerText = "Team " + teamA + " starting in:";
    whosTurn = "itsTeamA'sTurn";
  }

  document.getElementById("roundCounterPause").innerText = "Round " + rounds;

  randomQuote = Math.floor(Math.random() * quoteList.length);
  document.getElementById("quotePause").innerText = "“" + quoteList[randomQuote] + ".”";
  document.getElementById("authorPause").innerText = "—— " + quoteAuthorList[randomQuote] + ", an American";
  quoteList.splice(randomQuote, 1);
  quoteAuthorList.splice(randomQuote, 1);

  showPauseSplashScreen();

  timerElement.innerText = "00:30";
  timer = setInterval(() =>
  { if (sec < 10) {
      if (sec < 0) {
        clearInterval(timer);
          timerFunction30TeamTwo();
        } else {
          timerGameElement2.innerText = "00:0" + sec;
        }
    } else {
        timerGameElement2.innerText = "00:" + sec;
        }
    sec --;
  }, 1000);
}

function timerFunction30TeamTwo () {
  sec = 30;

  removePauseSplashScreen();

  timerGameElement2.innerText = "00:05";
  timer = setInterval(() =>
  { if (sec < 10) {
      if (sec < 0) {
        clearInterval(timer);
        if (wordsAnswered != indivAnswers.length) {
          for (let k = 0; k < indivAnswers.length; k++) {
            var answerID = document.getElementById("answer" + k);
            if (answerID.innerHTML != indivAnswers[k]) {
              answerID.style.color = "rgba(255, 170, 170, 255)";
              answerID.innerText = indivAnswers[k];
              }
            }
        }
        setTimeout(timerFunction5Start, 2000); // goes back to the first timer
        } else {
          timerElement.innerText = "00:0" + sec;
        }
    } else {
        timerElement.innerText = "00:" + sec;
        }
    sec --;
  }, 1000);
}

function checkKey(e) {
  var keyPressed = e.charCode;
  if (keyPressed == 13) {
      inputElement = document.getElementById("answerBox");
      input = document.getElementById("answerBox").value;
      for (let i = 0; i < indivAnswers.length; i++) {
        lowerCase = makeLowercase(indivAnswers[i]);
        upperCase = makeUppercase(indivAnswers[i]);
        upperThenLowercase = makeEverythingButFirstLetterLowercase(indivAnswers[i])
        var answerID = document.getElementById("answer" + i);
        if (input == indivAnswers[i] || input == lowerCase || input == indivAnswers[i] + " " || input == lowerCase + " " || input == upperCase || input == upperCase + " " || input == upperThenLowercase || input == upperThenLowercase + " ") {
          if (answerID.innerText != upperCase) {
            wordsAnswered++;
            answerID.innerText = indivAnswers[i]; // changes the answer
            addPoints();
            if (wordsAnswered == indivAnswers.length) {
              clearInterval(timer);
              setTimeout(timerFunction5Start, 2000);
            }
          }

        }
      }
      document.getElementById("answerBox").value = "";
  }
}

function addPoints() {
  if (whosTurn == "itsTeamA'sTurn") {
    teamAPoints++;
    teamAPointsElement.innerText = teamAPoints;
  } else if (whosTurn == "itsTeamB'sTurn") {
    teamBPoints++;
    teamBPointsElement.innerText = teamBPoints;
  }
}

//-----------splash screen----------------

var startSplashScreen = document.getElementById("startSplashScreen");
var startWaitingScreen = document.getElementById("startWaitingScreen");
var pauseSplashScreen = document.getElementById("pauseSplashScreen");

function removeSplashScreen () {
  startSplashScreen.style.opacity = 0;
  setTimeout(()=>{
    startSplashScreen.classList.add("hidden")
    },610);
}

function removeStartWaitingScreen () {
  startWaitingScreen.style.opacity = 0;
  setTimeout(()=>{
    startWaitingScreen.classList.add("hidden")
    },610);
}

function removePauseSplashScreen () {
  pauseSplashScreen.style.opacity = 0;
  setTimeout(()=>{
    pauseSplashScreen.classList.add("hidden")
    },610);
}

// show functions

function showStartWaitingScreen () {
  startWaitingScreen.style.opacity = 1;
  startWaitingScreen.classList.remove("hidden");
}

function showPauseSplashScreen () {
  pauseSplashScreen.style.opacity = 1;
  pauseSplashScreen.classList.remove("hidden");
}


// end endButton

const openModalButtons = document.querySelectorAll('[data-modal-target]')
const closeModalButtons = document.querySelectorAll('[data-close-button]')
const overlay = document.getElementById('overlay')

openModalButtons.forEach(button => {
  button.addEventListener('click', () => {
    const modal = document.querySelector(button.dataset.modalTarget)
    openModal(modal)
  })
})

overlay.addEventListener('click', () => {
  const modals = document.querySelectorAll('.modal.active')
  modals.forEach(modal => {
    closeModal(modal)
  })
})

closeModalButtons.forEach(button => {
  button.addEventListener('click', () => {
    const modal = button.closest('.modal')
    closeModal(modal)
  })
})

function openModal(modal) {
  if (modal == null) return
  modal.classList.add('active')
  overlay.classList.add('active')
}

function closeModal(modal) {
  if (modal == null) return
  modal.classList.remove('active')
  overlay.classList.remove('active')
}



/* TODO:
  - make font work
  - upload the right advisory olympics logo

  DONE:
 - avoid being able to type in an answer twice
 - show answers at the end
 - end round early
 - change color of missing text
 - end button + popup screen with summary
    - rounds played
    - perfect rounds
    - do you really want to end the game? (NO, yes!)-- really? (im sure, no, thanks for making sure)
*/
